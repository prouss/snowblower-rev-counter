<!DOCTYPE html>
<!-- THIS FILE WAS GENERATED BY HTP. DO NOT EDIT! -->
<!-- Source file is in src/rotation-information.htp. -->
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Snowblower-rev-counter by prouss</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  <meta name="Generator" content="htp 1.18">
</head>
  <body>
    <section class="page-header">
      <h1 class="project-name" style="margin-bottom: 10px;">Snowblower-rev-counter</h1>
      <h2 class="project-tagline" style="margin-bottom: 20px; margin-top: 10px;">snowblower revolution counter</h2>
      <a href="index.html" class="btn">Home</a>
      <a href="https://github.com/prouss/snowblower-rev-counter" class="btn">View on GitHub</a>
      <a href="https://github.com/prouss/snowblower-rev-counter/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/prouss/snowblower-rev-counter/tarball/master" class="btn">Download .tar.gz</a>
    </section>
    <section class="main-content">
              	<h1>Getting Rotation Information from the Engine</h1>
	<p>This page contains the information on all activities related to getting the rotation information from the engine.</p>
	
	<!---- 06/14/2015: Wire on spark plug cable --->
   	<hr>
	<a name="Wire"><h2>06/14/2015: Wire on spark plug cable</h2></a>
<p>Our original idea was to use a wire rolled over the spark cable to pick up the engine's ignition. In the tests we did with a multi-meter a few weeks ago we measured a small current of about 100µA.
This week, when we hooked our wire (terminated with a small resistance) to the oscilloscope, it was difficult to see a nice signal because there was too much noise.
A circuit to condition the signal is required before we could use it.
After our test, we found some interesting web pages where this approach is used.
This page <a href="http://www.sportdevices.com/rpm_readings/index.htm">http://www.sportdevices.com/rpm_readings/index.htm</a> shows few circuits for sensing RPM from an engine.
</p>
<figure>
	<img src="images/pickup-wire.jpg" alt="Wire rolled overthe spark plug cable">
	<figcaption>Photo 1 - Wire rolled over the spark plug cable</figcaption>
</figure>
<p>Because our engine has an alternator, we decided to get the rotation information from the AC coming out of the alternator.
It should be a little bit simpler to convert the AC from the alternator to a pulses that could be used by the Arduino.</p>
	
	<!---- 10/24/2015: Converting rotation information to pulses --->
   	<hr>
	<a name="SchmittTrigger"><h2>10/24/2015: Converting rotation information to pulses</h2></a>
<p>To convert the rotation information to digital pulse that could be used by the Arduino, we pass the output of the alternator through a Schmitt Trigger. This kind of circuit is used to convert noisy analogic signal to a digital signal.
If you want to know more about Schmitt Trigger, this page explains how they work and when to use them: <a href="http://electronics.stackexchange.com/questions/109270/what-is-a-schmitt-trigger-and-its-application-exactly">What is a Schmitt Trigger and its application exactly?</a>
</p>
<p>
</p>
<figure>
	<img src="images/SchmittTrigger.png" alt="Schmitt trigger used to convert rotation information to pulses">
	<figcaption>Figure 1 - Schmitt trigger used to convert rotation information to pulses</figcaption>
</figure>
<p>The circuit was designed to accept input from 6 to 60 volts. Diodes D2 and D3 are used to limit the voltage V3 to an acceptable level (1.4 volts) for the operating amplifier. R1 and R2 divide voltage V2 for low voltage values.
When V2 reaches 1.4 volts, then the voltage across R1 would roughly be Vin - 2.1 volts. The value of R1 was selected so it will dissipate less than 1/4 watts when Vin is 60 volts.
The values of R3, R4, and R5 where selected to have a hysteresis loop below the maximum V3 voltage.
</p>
<figure>
		<a href="images/SchmittTrigge6v30hzSimulation.png"><img src="images/small SchmittTrigge6v30hzSimulation.png" alt="Spice simulation with Vin = 6 volts at 30 Hz"></a>
	<figcaption>Figure 2 - Spice simulation with Vin = 6 volts at 30 Hz</figcaption>
</figure>
<p>
On the simulation we could see that Vout is going from 3.5v to 0v when Vin is going above 2.7v, after that point Vin must go below 0.7v before Vout raise again to 3.5v.
This hysteresis loop help having a nice digital event if the output of the alternator is noisy. You could click on the image to see a larger version.
</p>
<p>
The following photo shows the Schmitt Trigger board for our project.
</p>
<figure>
		<a href="images/SchmittTriggerBoard.jpg"><img src="images/small SchmittTriggerBoard.jpg" alt="The Schmitt Trigger board"></a>
	<figcaption>Photo 2 - The Schmitt Trigger board</figcaption>
</figure>
	
      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/prouss/snowblower-rev-counter">Snowblower-rev-counter</a> is maintained by <a href="https://github.com/prouss">Pierre Rousseau</a> and <a href="https://github.com/pouti">Étienne Lapointe-Rousseau</a>.</span>
      </footer>
    </section>
  </body>
</html>
